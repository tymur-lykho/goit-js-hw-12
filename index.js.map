{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '13611713-3ff341a8136eabd4453734908';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nexport default async function getPhotos(query, limit, page) {\n  const result = await axios.get('', {\n    params: {\n      q: query,\n      per_page: limit,\n      page: page,\n    },\n  });\n\n  return result.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nlet galleryBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\ngalleryBox.on('error.simplelightbox', function (e) {\n  console.log(e);\n});\n\nexport function renderContent(data) {\n  const markup = data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"img-card\">\n\t\t\t\t<a href=\"${largeImageURL}\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"img\"\n\t\t\t\t\t\tsrc=\"${webformatURL}\"\n\t\t\t\t\t\talt=\"${tags}\"\n\t\t\t\t\t\twidth=\"360\"\n\t\t\t\t\t\theight=\"200\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"img-data-container\">\n\t\t\t\t\t\t<ul class=\"data\">\n\t\t\t\t\t\t\t<li class=\"data-item\">\n\t\t\t\t\t\t\t\t<b class=\"data-title\">Likes</b>\n\t\t\t\t\t\t\t\t<p class=\"data-value\" data-likes>${likes}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"data-item\">\n\t\t\t\t\t\t\t\t<b class=\"data-title\">Views</b>\n\t\t\t\t\t\t\t\t<p class=\"data-value\" data-views>${views}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"data-item\">\n\t\t\t\t\t\t\t\t<b class=\"data-title\">Comments</b>\n\t\t\t\t\t\t\t\t<p class=\"data-value\" data-comments>${comments}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"data-item\">\n\t\t\t\t\t\t\t\t<b class=\"data-title\">Downloads</b>\n\t\t\t\t\t\t\t\t<p class=\"data-value\" data-downloads>${downloads}</p>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n      </li>`;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  galleryBox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getPhotos from './js/pixabay-api';\nimport { renderContent } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more-btn');\n\nlet limit = 15;\nlet page = 1;\nlet lastQuery;\nlet totalCountOfResult;\n\nloadBtn.classList.add('hidden');\n\niziToast.settings({\n  position: 'topRight',\n});\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n\n  const query = form.querySelector('.form-input').value.trim();\n\n  if (query === '') {\n    iziToast.error({\n      message: 'Query is not valid!',\n    });\n    return;\n  }\n\n  if (query !== lastQuery) {\n    lastQuery = query;\n    page = 1;\n  }\n\n  loader.classList.add('start');\n\n  try {\n    const data = await getPhotos(query, limit, page);\n    totalCountOfResult = data.totalHits;\n    if (data) {\n      renderContent(data.hits);\n    }\n    if (data.hits.length < limit) {\n      loadBtn.classList.add('hidden');\n    } else {\n      loadBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n    });\n  }\n\n  loader.classList.remove('start');\n\n  form.reset();\n});\n\nloadBtn.addEventListener('click', async () => {\n  loadBtn.classList.add('hidden');\n  loader.classList.add('start');\n\n  page += 1;\n\n  try {\n    const data = await getPhotos(lastQuery, limit, page);\n    if (data) {\n      renderContent(data.hits);\n      scrollDown('.img-card', 3);\n    }\n\n    if (data.hits.length < limit) {\n      loadBtn.classList.add('hidden');\n    } else {\n      loadBtn.classList.remove('hidden');\n    }\n\n    if (page > Math.ceil(totalCountOfResult / limit)) {\n      loader.classList.remove('start');\n\n      return iziToast.error({\n        message: \"We're sorry, there are no more posts to load\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n    });\n  }\n\n  loader.classList.remove('start');\n});\n\nfunction scrollDown(itemSelector, countOfItem) {\n  const item = document.querySelector(itemSelector);\n  const itemHeight = item.getBoundingClientRect().height;\n  window.scrollBy({\n    top: itemHeight * countOfItem,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","axios","getPhotos","query","limit","page","gallery","galleryBox","SimpleLightbox","e","renderContent","data","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loader","loadBtn","lastQuery","totalCountOfResult","iziToast","event","error","scrollDown","itemSelector","countOfItem","itemHeight"],"mappings":"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"}